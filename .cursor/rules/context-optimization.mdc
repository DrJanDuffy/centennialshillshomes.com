---
description: Context optimization rules to prevent high context percentage in Cursor
type: Always
alwaysApply: true
---

# Context Optimization Rules

## Core Principle
- âœ… **Keep rules concise** - Maximum 150 lines per rule
- âœ… **Minimize redundancy** - No duplicate content across rules
- âœ… **Focus on essentials** - Only include actionable guidance
- âœ… **Use references** - Link to external docs instead of embedding

## Context Efficiency Guidelines

### Rule Size Limits
- **Maximum lines**: 150 per rule
- **Maximum characters**: 8,000 per rule
- **Maximum words**: 1,000 per rule
- **Target density**: 6+ words per line

### Content Optimization
- âœ… **Essential examples only** - Remove verbose explanations
- âœ… **Concise patterns** - Show core implementation, not full code
- âœ… **Reference external docs** - Don't embed full documentation
- âœ… **Focus on real estate** - Remove generic examples

### File Organization
- âœ… **Single responsibility** - Each rule covers one topic
- âœ… **No overlap** - Eliminate duplicate information
- âœ… **Clear boundaries** - Well-defined rule scopes
- âœ… **Efficient globs** - Precise file targeting

## Context Monitoring

### Performance Indicators
- **Loading time**: Should be < 20ms for all rules
- **Memory usage**: Monitor context percentage in Cursor
- **Response time**: Quick rule application and processing

### Optimization Triggers
- **Context > 80%**: **AUTOMATIC NEW AGENT SESSION REQUIRED**
- **Context > 70%**: Consider starting new session
- **Context > 60%**: Monitor closely, prepare for new session
- **Loading > 50ms**: Reduce rule complexity
- **Memory issues**: Split large rules into smaller ones

## Best Practices

### Rule Creation
- âœ… **Start small** - Begin with essential patterns only
- âœ… **Iterate efficiently** - Add content gradually
- âœ… **Test performance** - Monitor context usage
- âœ… **Optimize regularly** - Remove unused content

### Content Management
- âœ… **Use summaries** - Brief overviews instead of full explanations
- âœ… **Link to sources** - Reference external documentation
- âœ… **Focus on patterns** - Show implementation, not theory
- âœ… **Remove examples** - Keep only essential code snippets

### Maintenance
- âœ… **Regular cleanup** - Remove outdated content
- âœ… **Performance monitoring** - Track context usage
- âœ… **Efficiency reviews** - Optimize for speed
- âœ… **Size management** - Keep rules under limits

## Emergency Context Reduction

### Immediate Actions
1. **ðŸš¨ AUTOMATIC NEW AGENT SESSION** - **MANDATORY when context > 80%**
2. **Split large rules** - Break into smaller files
3. **Remove examples** - Keep only essential patterns
4. **Eliminate redundancy** - Remove duplicate content
5. **Simplify explanations** - Use bullet points instead of paragraphs

### Agent Session Management
- ðŸš¨ **Context > 80%**: **AUTOMATIC NEW AGENT SESSION - NO EXCEPTIONS**
- âœ… **Context > 70%**: Consider starting new session
- âœ… **Context > 60%**: Monitor closely, prepare for new session
- âœ… **Performance issues**: New session often resolves them
- âœ… **Memory errors**: New session clears context cache

### When to Start New Agent Session
- ðŸš¨ **High context percentage** (> 80%) - **AUTOMATIC TRIGGER**
- **Slow response times** (> 5 seconds)
- **Terminal command failures** or interruptions
- **Memory-related errors** in Cursor
- **Rule processing delays** or timeouts
- **After major rule changes** or optimizations

### How to Start New Agent Session
1. **Save current work** - Ensure all changes are saved
2. **Note current state** - Document what was being worked on
3. **Start fresh session** - New agent instance
4. **Load essential rules** - Only load necessary rules initially
5. **Resume work** - Continue from where you left off

### Long-term Strategy
1. **Modular design** - Create focused, single-purpose rules
2. **Reference system** - Link to external docs
3. **Efficient patterns** - Show core implementation only
4. **Performance monitoring** - Track and optimize regularly